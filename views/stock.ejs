<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/style/stock.css">
    <link rel="stylesheet" href="/style/styling.css">

</head>
<body onload="showStocks()">
  <%- include('partials/header.ejs') %>
      <div class="rows">
      <div class="feedback">
        <div class="fb">
          <div class="unit">
            <p class="amount" id="totalAPlusUnits"></p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">A+</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount" id="totalBPlusUnits"></p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">B+</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount" id="totalOPlusUnits"></p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">O+</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount" id="totalABPlusUnits"></p>
          </div>
          <div class="blood1">
            <h4 class="bloodtype">AB+</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
       </div>
      <div class="feedback">
        <div class="fb">
          <div class="unit">
            <p class="amount"  id="totalAMinusUnits"> </p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">A-</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount"  id="totalBMinusUnits"></p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">B-</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount" id="totalOMinusUnits"></p>
          </div>
          <div class="blood">
            <h4 class="bloodtype">O-</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
         <div class="fb">
          <div class="unit">
            <p class="amount" id="totalABMinusUnits"></p>
          </div>
          <div class="blood1">
            <h4 class="bloodtype">AB-</h4>
            <i class="fa-solid fa-droplet" style="color: red;"></i>
        </div>
         </div>
       </div>
       <hr class="horizon"></hr>
       <div class="even">
       <div class="feedback1">
        <div class="fb1">
          <div class="footer">
            <h4 class="total">Total Donor</h4>
            <p class="amount"><%=totalDonor  %></p>
          </div>
          <div class="icons">
            <i class="fa-solid fa-users" style="color: #23437b;"></i> </div>
         </div>
         <div class="fb1">
          <div class="footer">
            <h4 class="total">Total Request</h4>
            <p class="amount"><%=totalRequest %></p>
          </div>
          <!-- <div class="icons">
            <i class="fa-solid fa-spinner" style="color: #1a3665;"></i></div>
         </div> -->
         <!-- <div class="fb1">
          <div class="footer">
            <h4 class="total">Approved Request</h4>
            <p class="amount">10</p>
          </div> -->
          <div class="icons">
           <i class="fa-solid fa-circle-check" style="color: #16366f;"></i> </div>
         </div>
        <div class="fb1">
          <div class="footer">
            <h4 class="total">Total Blood Unit</h4>
            <p class="amount"><%=total_units %></p>
          </div>
          <div class="icons">
            <i class="fa-solid fa-droplet" style="color: red;"></i> </div>
         </div>
       </div>
      </div>
    
    </div>
    </div>
    <script>
      function showStocks(){
        fetch("http://127.0.0.1:3000/showStock") .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                  console.log("data from backend",data)
                  document.getElementById('totalAPlusUnits').textContent =data.totalAPlusUnits
                  document.getElementById('totalBPlusUnits').textContent = data.totalBPlusUnits
                  document.getElementById('totalOPlusUnits').textContent = data.totalOPlusUnits
                  document.getElementById('totalABPlusUnits').textContent = data.totalABPlusUnits
                  document.getElementById('totalAMinusUnits').textContent = data.totalAMinusUnits
                  document.getElementById('totalBMinusUnits').textContent = data.totalBMinusUnits
                  document.getElementById('totalOMinusUnits').textContent = data.totalOMinusUnits
                  document.getElementById('totalABMinusUnits').textContent = data.totalABMinusUnits
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                });
      }
    </script>
</body>
</html>